<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>Hong's Blog - Viz</title>
        <link rel="stylesheet" href="https://pagpires.github.io/theme/css/main.css" />
        <link href="https://pagpires.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Hong's Blog Atom Feed" />

        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://pagpires.github.io/">Hong's Blog </a></h1>
                <nav><ul>
                    <li><a href="https://pagpires.github.io/category/misc.html">Misc</a></li>
                    <li class="active"><a href="https://pagpires.github.io/category/viz.html">Viz</a></li>
                </ul>
                </nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="https://pagpires.github.io/practice-of-interactive-bargraph.html">Practice of interactive bargraph</a></h1>
<footer class="post-info">
        <span>Sat 27 August 2016</span>

</footer><!-- /.post-info --><hr />
<p>Here below is my practice of interactive bargraph. Here are several features that I've introduced:</p>
<ul>
<li>Data-based color</li>
<li>Highlighting of the mouse-hovered bar, smooth transition</li>
<li>A tooltip with a position defined by the mouse-hovered bar</li>
</ul>
<p>I basically followed the <a href="http://chimera.labs.oreilly.com/books/1230000000345/ch10.html">tutorial</a> written by Scott Murray.</p>
<style type="text/css">
    .axis text{
        font-family: sans-serif;
        font-size: 11px;
    }
    .axis path, 
    .axi line{
        fill: none;
        stroke: black;
        shape-rendering: crispEdges;
    }
    svg rect .hightlight{
        fill: orange;
    }

    #tooltip {

            width: 200px;
            height: auto;
            padding: 10px;
            background-color: white;
            -webkit-border-radius: 10px;
            -moz-border-radius: 10px;
            border-radius: 10px;
            -webkit-box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4);
            -moz-box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4);
            box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4);
            pointer-events: none;
        }

        #tooltip.hidden {
            display: none;
        }

        #tooltip p {
            margin: 0;
            font-family: sans-serif;
            font-size: 16px;
            line-height: 20px;
        }

        h3 {
            text-align: center;
            font-family: sans-serif;
        }



</style>

<div id="barGraph">
  <h3>Practice of interactive bargraph design</h3>
  <div id="tooltip" class="hidden">
    <p>The value of this category</p>
    <p><span id="value">100</span>%</p>
  </div>
</div>

<script type="text/javascript" src="https://d3js.org/d3.v3.min.js">
</script>

<script type="text/javascript">
    var width = 500, 
        height = 300, 
        xPadding = 25, 
        yPadding = 15;
    var numN = 20,
        numRange = 100;
    var numList = [];
    for (var i=0; i<numN; i++){
        numList.push(Math.floor(Math.random()*numRange));
    }

    //scale
    var xScale = d3.scale.linear()
        .domain([0, numList.length])
        .range([0, width-2*xPadding]);
    var yScale = d3.scale.linear()
        .domain([0, d3.max(numList)])
        .range([0, height-2*xPadding]);
    var colScale = d3.scale.linear()
        .domain([0, d3.max(numList)])
        .range([50, 255]);
    //draw bars
    var barWidth = (width-xPadding*2)/numN*0.7;
    var svg = d3.select("div#barGraph").append("svg")
        .attr("width", width)
        .attr("height", height);
    svg.selectAll("g")
        .data(numList)
        .enter()
        .append("g")
        .attr("transform", "translate("+xPadding+","+yPadding+")")
        .append("rect")
        .attr("width", barWidth)            
        .attr("x", function(d,i){
            return xScale(i);
        })
        .attr("y", function(d){
            return height-yPadding-yScale(d);
        })
        .attr("height", function(d) {
            return yScale(d);
        })
        .attr("fill", function(d){
            return "rgb(0,0,"+Math.floor(colScale(d))+")";
        });

      //text
      svg.selectAll("g")
          .append("text")
          .text(function(d){
            return d;
          })
          .attr("x", function(d,i) {
            return xScale(i)+barWidth/2;
          })
          .attr("y", function(d){
            return height-yPadding-yScale(d)+10;
          })
          .attr("fill", "white")
          .attr("text-anchor","middle")
          .attr("font-family","sans-serif")
          .attr("font-size","11px")
      //axis
      // var yAxis = d3.svg.axis()
      //     .scale(yScale)
      //     .orient("left")
      //     .ticks(5);
      // svg.append("g")
      //     .attr("class","axis")
      //     .attr("transform","translate("+xPadding+","+4*yPadding+")")
      //     .call(yAxis);

      //interactivity: highlight
      svg.selectAll("g")
          .on("mouseover",function(d){

            var elemSelect = d3.select(this).select("rect");
            elemSelect.attr("fill","orange");
            var point = d3.mouse(this),
                xPosition = point[0],
                yPosition = point[1];
            var tooltip = d3.select('div#barGraph').select('#tooltip');
            tooltip.style("left", xPosition+"px")
                .style("top", yPosition+"px")
            tooltip.select("#value").text(d);
            tooltip.classed("hidden", false);
          })
          .on("mouseout", function(){
            d3.select(this).select("rect")
                .transition()
                .duration(250)
                .attr("fill", function(d){
                    return "rgb(0,0,"+Math.floor(colScale(d))+")";
                })
            d3.select("#tooltip").classed("hidden", true);

          });


</script>                </article>
<p class="paginator">
    Page 1 / 1
</p>
            </aside><!-- /#featured -->
            </ol><!-- /#posts-list -->
            </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                            <li><a href="http://getpelican.com/">Pelican</a></li>
                            <li><a href="http://python.org/">Python.org</a></li>
                            <li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="https://pagpires.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <p>Powered by <a href="http://getpelican.com/">Pelican</a>. Theme <a href="https://github.com/blueicefield/pelican-blueidea/">blueidea</a>, inspired by the default theme.</p>
        </footer><!-- /#contentinfo -->

</body>
</html>