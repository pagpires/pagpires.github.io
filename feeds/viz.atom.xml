<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Hong's Blog</title><link href="https://pagpires.github.io/" rel="alternate"></link><link href="https://pagpires.github.io/feeds/viz.atom.xml" rel="self"></link><id>https://pagpires.github.io/</id><updated>2016-08-27T15:27:35-04:00</updated><entry><title>Practice of interactive bargraph</title><link href="https://pagpires.github.io/practice-of-interactive-bargraph.html" rel="alternate"></link><published>2016-08-27T15:27:35-04:00</published><author><name>Xinyu Hong</name></author><id>tag:pagpires.github.io,2016-08-27:practice-of-interactive-bargraph.html</id><summary type="html">&lt;hr /&gt;
&lt;p&gt;Here below is my practice of interactive bargraph. Here are several features that I've introduced:
- Data-based color
- Highlighting of the mouse-hovered bar, smooth transition
- A tooltip with a position defined by the mouse-hovered bar&lt;/p&gt;
&lt;p&gt;I basically followed the &lt;a href="http://chimera.labs.oreilly.com/books/1230000000345/ch10.html"&gt;tutorial&lt;/a&gt; written by Scott Murray.&lt;/p&gt;
&lt;p&gt;&lt;html&gt;
&lt;head&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;style&lt;/span&gt; &lt;span class="nt"&gt;type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;text/css&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="nc"&gt;.axis&lt;/span&gt; &lt;span class="nt"&gt;text&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nb"&gt;font-family&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;sans-serif&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="nb"&gt;font-size&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="m"&gt;11px&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="nc"&gt;.axis&lt;/span&gt; &lt;span class="nt"&gt;path&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; 
    &lt;span class="nc"&gt;.axi&lt;/span&gt; &lt;span class="nt"&gt;line&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;fill&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;none&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;stroke&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;black&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;shape&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;rendering&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;crispEdges&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="nt"&gt;svg&lt;/span&gt; &lt;span class="nt"&gt;rect&lt;/span&gt; &lt;span class="nc"&gt;.hightlight&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;fill&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;orange&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="nn"&gt;#tooltip&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="nb"&gt;position&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;absolute&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="nb"&gt;width&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="m"&gt;200px&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="nb"&gt;height&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;auto&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="nb"&gt;padding&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="m"&gt;10px&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="nb"&gt;background-color&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;white&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;webkit&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nb"&gt;border&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;radius&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="m"&gt;10px&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;moz&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nb"&gt;border&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;radius&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="m"&gt;10px&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="nb"&gt;border&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;radius&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="m"&gt;10px&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;webkit&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;box&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;shadow&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="m"&gt;4px&lt;/span&gt; &lt;span class="m"&gt;4px&lt;/span&gt; &lt;span class="m"&gt;10px&lt;/span&gt; &lt;span class="n"&gt;rgba&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;4&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;moz&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;box&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;shadow&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="m"&gt;4px&lt;/span&gt; &lt;span class="m"&gt;4px&lt;/span&gt; &lt;span class="m"&gt;10px&lt;/span&gt; &lt;span class="n"&gt;rgba&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;4&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;box&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;shadow&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="m"&gt;4px&lt;/span&gt; &lt;span class="m"&gt;4px&lt;/span&gt; &lt;span class="m"&gt;10px&lt;/span&gt; &lt;span class="n"&gt;rgba&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;4&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="nb"&gt;pointer&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;events&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;none&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;

        &lt;span class="nn"&gt;#tooltip&lt;/span&gt;&lt;span class="nc"&gt;.hidden&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="nb"&gt;display&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;none&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="nn"&gt;#tooltip&lt;/span&gt; &lt;span class="nt"&gt;p&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="nb"&gt;margin&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="nb"&gt;font-family&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;sans-serif&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="nb"&gt;font-size&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="m"&gt;16px&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="nb"&gt;line-height&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="m"&gt;20px&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;

        &lt;span class="nt"&gt;h3&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="nb"&gt;text-align&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;center&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="nb"&gt;font-family&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;sans-serif&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;



&lt;span class="o"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;style&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;/head&gt;
&lt;body&gt;
    &lt;h3&gt;Practice of interactive bargraph design&lt;/h3&gt;
    &lt;div id="tooltip" class="hidden"&gt;
        &lt;p&gt;The value of this category&lt;/p&gt;
        &lt;p&gt;&lt;span id="value"&gt;100&lt;/span&gt;%&lt;/p&gt;
    &lt;/div&gt;
    &lt;script type="text/javascript" src="d3.v3.min.js"&gt;
    &lt;/script&gt;
    &lt;script type="text/javascript"&gt;
        var width = 500, 
            height = 300, 
            xPadding = 25, 
            yPadding = 15;
        var numN = 20,
            numRange = 100;
        var numList = [];
        for (var i=0; i&amp;lt;numN; i++){
            numList.push(Math.floor(Math.random()&lt;em&gt;numRange));
        }
        //scale
        var xScale = d3.scale.linear()
            .domain([0, numList.length])
            .range([0, width-2&lt;/em&gt;xPadding]);
        var yScale = d3.scale.linear()
            .domain([0, d3.max(numList)])
            .range([0, height-2&lt;em&gt;xPadding]);
        var colScale = d3.scale.linear()
            .domain([0, d3.max(numList)])
            .range([50, 255]);
        //draw bars
        var barWidth = (width-xPadding&lt;/em&gt;2)/numN*0.7;
        var svg = d3.select("body").append("svg")
            .attr("width", width)
            .attr("height", height);
        svg.selectAll("g")
            .data(numList)
            .enter()
            .append("g")
            .attr("transform", "translate("+xPadding+","+yPadding+")")
            .append("rect")
            .attr("width", barWidth)          &lt;br /&gt;
            .attr("x", function(d,i){
                return xScale(i);
            })
            .attr("y", function(d){
                return height-yPadding-yScale(d);
            })
            .attr("height", function(d) {
                return yScale(d);
            })
            .attr("fill", function(d){
                return "rgb(0,0,"+Math.floor(colScale(d))+")";
            });&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;      //text
      svg.selectAll(&amp;quot;g&amp;quot;)
          .append(&amp;quot;text&amp;quot;)
          .text(function(d){
            return d;
          })
          .attr(&amp;quot;x&amp;quot;, function(d,i) {
            return xScale(i)+barWidth/2;
          })
          .attr(&amp;quot;y&amp;quot;, function(d){
            return height-yPadding-yScale(d)+10;
          })
          .attr(&amp;quot;fill&amp;quot;, &amp;quot;white&amp;quot;)
          .attr(&amp;quot;text-anchor&amp;quot;,&amp;quot;middle&amp;quot;)
          .attr(&amp;quot;font-family&amp;quot;,&amp;quot;sans-serif&amp;quot;)
          .attr(&amp;quot;font-size&amp;quot;,&amp;quot;11px&amp;quot;)
      //axis
      // var yAxis = d3.svg.axis()
      //     .scale(yScale)
      //     .orient(&amp;quot;left&amp;quot;)
      //     .ticks(5);
      // svg.append(&amp;quot;g&amp;quot;)
      //     .attr(&amp;quot;class&amp;quot;,&amp;quot;axis&amp;quot;)
      //     .attr(&amp;quot;transform&amp;quot;,&amp;quot;translate(&amp;quot;+xPadding+&amp;quot;,&amp;quot;+4*yPadding+&amp;quot;)&amp;quot;)
      //     .call(yAxis);

      //interactivity: highlight
      svg.selectAll(&amp;quot;g&amp;quot;)
          .on(&amp;quot;mouseover&amp;quot;,function(d){

            var elemSelect = d3.select(this).select(&amp;quot;rect&amp;quot;);
            elemSelect.attr(&amp;quot;fill&amp;quot;,&amp;quot;orange&amp;quot;);
            var point = d3.mouse(this),
                xPosition = point[0],
                yPosition = elemSelect.attr(&amp;quot;y&amp;quot;)-10;
            var tooltip = d3.select(&amp;#39;body&amp;#39;).select(&amp;#39;#tooltip&amp;#39;);
            tooltip.style(&amp;quot;left&amp;quot;, xPosition+&amp;quot;px&amp;quot;)
                .style(&amp;quot;top&amp;quot;, yPosition+&amp;quot;px&amp;quot;)
            tooltip.select(&amp;quot;#value&amp;quot;).text(d);
            tooltip.classed(&amp;quot;hidden&amp;quot;, false);
          })
          .on(&amp;quot;mouseout&amp;quot;, function(){
            d3.select(this).select(&amp;quot;rect&amp;quot;)
                .transition()
                .duration(250)
                .attr(&amp;quot;fill&amp;quot;, function(d){
                    return &amp;quot;rgb(0,0,&amp;quot;+Math.floor(colScale(d))+&amp;quot;)&amp;quot;;
                })
            d3.select(&amp;quot;#tooltip&amp;quot;).classed(&amp;quot;hidden&amp;quot;, true);

          });


&amp;lt;/script&amp;gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;/body&gt;
&lt;/html&gt;&lt;/p&gt;</summary></entry></feed>